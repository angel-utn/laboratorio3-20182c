CREATE DATABASE CLUB
GO
USE CLUB
GO
CREATE TABLE SOCIOS(
  LEGAJO BIGINT NOT NULL PRIMARY KEY,
  FNAC DATE NOT NULL,
  NOMBRES VARCHAR(50) NOT NULL,
  APELLIDO VARCHAR(50) NOT NULL
)
GO
CREATE TABLE PROVINCIAS(
  IDPROVINCIA BIGINT NOT NULL PRIMARY KEY,
  PROVINCIA VARCHAR(50) NOT NULL
)
GO
CREATE TABLE LOCALIDADES(
  CP BIGINT NOT NULL PRIMARY KEY,
  LOCALIDAD VARCHAR(50) NOT NULL,
  IDPROVINCIA BIGINT NOT NULL FOREIGN KEY REFERENCES PROVINCIAS (IDPROVINCIA)
)
GO
CREATE TABLE SEDES(
  IDSEDE INT NOT NULL PRIMARY KEY IDENTITY(1, 1),
  NOMBRE VARCHAR(50) NOT NULL,
  DIRECCION VARCHAR(150) NOT NULL,
  CP BIGINT NOT NULL FOREIGN KEY REFERENCES LOCALIDADES (CP),
  TELEFONO VARCHAR(20) NULL
)
GO
CREATE TABLE ACTIVIDADES(
  IDACTIVIDAD INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  NOMBRE VARCHAR(50) NOT NULL,
  TIPO CHAR NOT NULL CHECK(TIPO = 'I' OR TIPO = 'E'),
  IDSEDE INT NOT NULL FOREIGN KEY REFERENCES SEDES (IDSEDE),
  COSTO MONEY NOT NULL
)
GO
CREATE TABLE ACTIVIDADES_X_SOCIO(
  IDACTIVIDAD INT NOT NULL FOREIGN KEY REFERENCES ACTIVIDADES(IDACTIVIDAD),
  LEGAJO BIGINT NOT NULL FOREIGN KEY REFERENCES SOCIOS(LEGAJO),
  FECHA_INICIO DATE NULL,
  PRIMARY KEY (IDACTIVIDAD, LEGAJO)
)
GO
CREATE TABLE PAGOS(
  LEGAJO BIGINT NOT NULL FOREIGN KEY REFERENCES SOCIOS(LEGAJO),
  MES SMALLINT NOT NULL CHECK(MES >= 1 AND MES <= 12),
  AÑO INT NOT NULL,
  IMPORTE MONEY NOT NULL,
  FECHA DATE NOT NULL,
  PRIMARY KEY (LEGAJO, MES, AÑO)
)

-- DATOS
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (1000, '1/1/1990', 'FERNANDEZ', 'CARLOS MARTIN')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (2000, '2/2/1998', 'LOPEZ', 'JULIANA')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (3000, '3/3/2004', 'FREIRE', 'DALMIRO')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (5000, '4/4/1986', 'VILLALBA', 'JULIETA')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (6000, '5/5/2000', 'PERRONE', 'CANDELA')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (7000, '6/6/2000', 'PERRONE', 'CARMEN')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (8000, '7/7/2000', 'CASTRO', 'PABLO')
INSERT INTO SOCIOS (LEGAJO, FNAC, APELLIDO, NOMBRES) VALUES (4000, '8/8/2000', 'DEL PIERO', 'BELEN')

-- PROVINCIAS
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (1, 'BUENOS AIRES')
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (2, 'CORRIENTES')
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (3, 'CORDOBA')
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (4, 'SANTA FE')
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (5, 'LA PAMPA')
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (6, 'MISIONES')
INSERT INTO PROVINCIAS (IDPROVINCIA, PROVINCIA) VALUES (7, 'CHACO')

-- LOCALIDADES
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (1000, 'LANÚS', 1)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (1010, 'PILAR', 1)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (1020, 'TIGRE', 1)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (2000, 'PASO DE LOS LIBRES', 2)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (3000, 'LA FALDA', 3)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (3010, 'LA CUMBRE', 3)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (3020, 'VILLA CARLOS PAZ', 3)
INSERT INTO LOCALIDADES (CP, LOCALIDAD, IDPROVINCIA) VALUES (4000, 'VENADO TUERTO', 4)

-- SEDES
INSERT INTO SEDES (NOMBRE, DIRECCION, CP, TELEFONO) VALUES('LANUS', 'MITRE 123', 1000, '13131313')
INSERT INTO SEDES (NOMBRE, DIRECCION, CP, TELEFONO) VALUES('PILAR', 'BELGRANO 3943', 1010, '23212312')
INSERT INTO SEDES (NOMBRE, DIRECCION, CP, TELEFONO) VALUES('MICROESTADIO I', 'CAZON 10', 1020, NULL)
INSERT INTO SEDES (NOMBRE, DIRECCION, CP, TELEFONO) VALUES('MICROESTADIO II', 'PRESIDENTE SIMON 7647', 1010, NULL)

-- ACTIVIDADES
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('AJEDREZ', 'I', 1, 120)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('HANDBALL', 'E', 2, 400)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('VOLLEY', 'E', 3, 500)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('FÚTBOL', 'E', 3, 600)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('TENIS', 'I', 1, 800)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('ESGRIMA', 'I', 4, 500)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('BADMINTON', 'I', 4, 450)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('RUGBY', 'E', 4, 550)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('HOCKEY', 'E', 4, 250)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('BASQUET', 'E', 4, 650)
INSERT INTO ACTIVIDADES (NOMBRE, TIPO, IDSEDE, COSTO) VALUES ('ARQUERIA', 'I', 4, 950)

--SOCIOS Y ACTIVIDADES
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD, FECHA_INICIO) VALUES (1000, 1, '10/5/2018')
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD) VALUES (1000, 2)
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD) VALUES (1000, 3)
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD) VALUES (2000, 1)
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD) VALUES (3000, 2)
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD) VALUES (3000, 3)
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD) VALUES (5000, 4)
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD, FECHA_INICIO) VALUES (6000, 1, '15/9/2017')
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD, FECHA_INICIO) VALUES (6000, 2, '14/6/2018')
INSERT INTO ACTIVIDADES_X_SOCIO(LEGAJO, IDACTIVIDAD, FECHA_INICIO) VALUES (6000, 3, '17/7/2018')

-- PAGOS
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (1000, 7, 2018, 600, '1/7/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (2000, 7, 2018, 300, '10/7/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (3000, 6, 2018, 400, '6/6/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (5000, 6, 2018, 500, '10/6/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (6000, 7, 2018, 1000, '11/7/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (3000, 5, 2018, 200, '6/5/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (5000, 5, 2018, 900, '10/5/2018')
INSERT INTO PAGOS (LEGAJO, MES, AÑO, IMPORTE, FECHA) VALUES (6000, 5, 2018, 2000, '11/5/2018')
